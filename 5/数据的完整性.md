# 数据库完整性 
- 数据的正确性
- 数据的相容性
完整性是阻止合法用户通过合法操作向数据库中加入不正确的数据  
安全性防范的是非法用户和非法操作存取数据库中的正确数据。  
### 违约处理
对于违背数据库的完整性约束条件的操作采取以下动作：

- 拒绝NO ACTION
- 级联CASCADE
## 实体完整性 ##
create table 中用primary key定义。  
单属性构成的码有两种构成方法：  

- 定义为列级约束条件
- 定义为表级约束条件
若主码是由多个属性构成的则只能定义为表级的约束条件。  

若定义了一个primary key的主码则dbms会在主码上建立一个索引。  
现实世界中的实体是可区分的，即它们具有某种唯一性标识；相应的，关系模型中以主码作为唯一性标识。如果主属性取空值，则说明存在某个不可标识的实体，即存在不可区分的实体，这与b相矛盾，因此这个规则称为实体完整性。    
## 参照完整性 ##
在create table中用foreign key短语定义那些列为外码。用references短语指明这些外码参照那些表的主码  
参照完整性检查和违约处理  
破坏参照完整性的操作有：  

- 向参照表中增加一个在被参照表中找不到的元组。
- 修改参照表中的一个在被参照表中有对应关系的元组值。
- 删除参照表中的一个在被参照表中有记录的元组
- 修改参照表中的在背心参照表中有对应关系的属性的值。
具体如下表：  

![](http://i.imgur.com/wW5q7sS.jpg)  
## 用户定义完整性 ##
可以定义在属性上也可以定义在元组上。  
create table时定义属性上的约束条件  
- 列值非空（NOT NULL）
- 列值唯一（UNIQUE)
- 检查列值是否满足一个条件表达式（CHECK）
如何检查用户定义的完整性与违约处理  
插入元祖或修改属性值是，若违背用户定义的完整性操作，则dbms会拒绝执行。  
用chek字句定义元祖中的多个属性的约束。  
插入或修改值时检查用户当以的约束条件，若违背则拒绝执行。
![](http://i.imgur.com/TeIzlnN.jpg)  
